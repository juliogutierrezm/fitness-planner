<div class="plans-page">
  <header class="plans-header">
    <h1>Mis planes de entrenamiento</h1>
    <p>Revisa tus planes activos y lo que sigue esta semana.</p>
  </header>

  <div
    class="plans-loading"
    *ngIf="isLoading"
    role="status"
    aria-live="polite"
    [attr.aria-busy]="isLoading">
    <mat-spinner diameter="32"></mat-spinner>
    <p>Cargando tus planes...</p>
  </div>

  <section class="plans-list" *ngIf="!isLoading">
    <article
      class="client-card plan-card"
      *ngFor="let plan of plans; trackBy: trackByPlan"
      role="button"
      tabindex="0"
      (click)="openPlan(plan)"
      (keydown)="onPlanKeydown($event, plan)"
      [attr.aria-label]="getPlanAriaLabel(plan)">
      <div class="plan-meta" *ngIf="plan.date">
        <span class="plan-date">
          {{ plan.date | date:'dd/MM/yyyy' }}
        </span>
      </div>

      <h3 class="plan-objective">
        {{ plan.objective || plan.name || 'Objetivo pendiente' }}
      </h3>

      <p class="plan-sessions">
        <mat-icon aria-hidden="true">calendar_today</mat-icon>
        <span>{{ getSessionCount(plan) }} sesiones</span>
      </p>

      <mat-icon class="plan-chevron" aria-hidden="true">chevron_right</mat-icon>
    </article>

    <div class="plans-empty" *ngIf="!plans.length">
      <mat-icon>event_busy</mat-icon>
      <p>Aun no tienes planes de entrenamiento asignados.</p>
    </div>
  </section>
</div>
