<div class="auth-page">
  <div class="auth-wrapper">
    <!-- Card -->
    <mat-card class="auth-card">
      <mat-card-content>
        <!-- Logo Section (integrated) -->
        <div class="auth-logo">
          <img src="assets/SpeedUpCoachLogoPNG.png" alt="SpeedUp Coach" />
        </div>

        <div class="auth-header">
          <h1>Bienvenido</h1>
          <p>Inicia sesión en tu cuenta de entrenamiento</p>
        </div>

        <div class="error-banner" *ngIf="error">
          <mat-icon>error_outline</mat-icon>
          {{ error }}
        </div>

        <form class="auth-form" [formGroup]="form" (ngSubmit)="submit()">
          <mat-form-field appearance="outline">
            <mat-label>Correo electrónico</mat-label>
            <input matInput type="email" formControlName="email" autocomplete="email" placeholder="tu@correo.com">
            <mat-error *ngIf="form.get('email')?.hasError('required')">
              Ingresa tu correo.
            </mat-error>
            <mat-error *ngIf="form.get('email')?.hasError('email')">
              Ingresa un correo válido.
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Contraseña</mat-label>
            <input matInput [type]="showPassword ? 'text' : 'password'" formControlName="password" autocomplete="current-password" placeholder="••••••••">
            <button
              mat-icon-button
              matSuffix
              type="button"
              (click)="togglePassword()"
              [attr.aria-label]="showPassword ? 'Ocultar contraseña' : 'Mostrar contraseña'"
            >
              <mat-icon>{{ showPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
            </button>
            <mat-error *ngIf="form.get('password')?.hasError('required')">
              La contraseña es obligatoria.
            </mat-error>
          </mat-form-field>

          <button mat-flat-button class="auth-primary" type="submit" [disabled]="loading">
            <span *ngIf="!loading">Iniciar sesión</span>
            <span *ngIf="loading">Iniciando...</span>
          </button>

          <div class="auth-links">
            <button mat-button type="button" class="link-button" (click)="goToForgotPassword()" [disabled]="loading">
              ¿Olvidaste tu contraseña?
            </button>
          </div>
        </form>

        <div class="auth-footer">
          <span>¿Aún no tienes cuenta?</span>
          <button mat-button type="button" class="link-button" (click)="goToSignup()">
            Crear cuenta
          </button>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Footer -->
    <p class="auth-copyright">© 2026 SpeedUp Coach. Todos los derechos reservados.</p>
  </div>
</div>
