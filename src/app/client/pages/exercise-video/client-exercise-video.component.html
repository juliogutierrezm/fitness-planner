<div class="exercise-video-page">
  <header class="video-header">
    <button class="nav-back" type="button" (click)="goBack()" aria-label="Cerrar video" [disabled]="isLoading">
      <mat-icon aria-hidden="true">close</mat-icon>
    </button>
    <div class="video-header-text">
      <p class="video-eyebrow">Video</p>
      <h1 class="video-title">{{ exerciseTitle }}</h1>
    </div>
  </header>

  <div
    class="video-loading"
    *ngIf="isLoading"
    role="status"
    aria-live="polite"
    [attr.aria-busy]="isLoading">
    <mat-spinner diameter="32"></mat-spinner>
    <p>Cargando video...</p>
  </div>

  <section class="video-body" *ngIf="!isLoading && !videoMissing">
    <div class="video-frame liquid-card" *ngIf="videoUrl; else videoEmpty">
      <iframe
        *ngIf="isYoutube(); else fileVideo"
        [src]="embedUrl"
        [attr.title]="exerciseTitle"
        frameborder="0"
        allow="accelerometer; encrypted-media; picture-in-picture"
        allowfullscreen></iframe>
      <ng-template #fileVideo>
        <video *ngIf="videoUrl" [src]="videoUrl" controls></video>
      </ng-template>
    </div>
    <ng-template #videoEmpty>
      <div class="video-empty liquid-card">
        <mat-icon aria-hidden="true">movie_off</mat-icon>
        <p>No hay video disponible.</p>
      </div>
    </ng-template>
  </section>

  <div class="video-missing" *ngIf="!isLoading && videoMissing">
    <mat-icon aria-hidden="true">event_busy</mat-icon>
    <p>No encontramos este video.</p>
    <button class="client-button" type="button" (click)="goBack()">Volver</button>
  </div>
</div>
